<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESDA: ACLC - Student Dashboard</title>
    <link rel="stylesheet" href="../css/student-dashboard.css">
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">üéì</div>
                <div class="logo-text">
                    <h2>TESDA: ACLC</h2>
                    <span>Student Dashboard</span>
                </div>
            </a>
            
            <div class="user-info">
                <div class="user-details">
                    <h3 id="userName">Loading...</h3>
                    <p id="userEmail">student@example.com</p>
                </div>
                <div class="user-avatar" id="userAvatar">S</div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <h3>Navigation</h3>
            <ul class="sidebar-nav">
                <li>
                    <a href="#" class="active" onclick="showSection('overview')">
                        <span>üìä</span> Dashboard Overview
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('apply')" id="applyLink">
                        <span>üìù</span> Apply for Scholarship
                        <span class="notification-badge" id="applyNotification" style="display: none;">!</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('documents')" id="documentsLink">
                        <span>üìÑ</span> Upload Documents
                        <span class="notification-badge" id="documentsNotification" style="display: none;"></span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('exam')" id="examLink">
                        <span>üíª</span> Take Online Exam
                        <span class="notification-badge" id="examNotification" style="display: none;">!</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('status')" id="statusLink">
                        <span>üìä</span> Application Status
                        <span class="notification-badge" id="statusNotification" style="display: none;">!</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('profile')" id="profileLink">
                        <span>‚öôÔ∏è</span> Update Profile
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Overview -->
            <div id="overviewSection" class="content-section">
                <div class="content-header">
                    <h1>Dashboard Overview</h1>
                    <p>Welcome to your scholarship application portal</p>
                </div>

                <div class="welcome-banner">
                    <h2 id="welcomeMessage">Hello, Student!</h2>
                    <p>Track your scholarship application progress and complete the required steps</p>
                </div>

                <!-- Application Progress -->
                <div class="progress-container">
                    <h3>Application Progress</h3>
                    <div class="progress-steps" id="progressSteps">
                        <div class="step" id="step1">
                            <div class="step-number">1</div>
                            <div class="step-label">Apply</div>
                        </div>
                        <div class="step" id="step2">
                            <div class="step-number">2</div>
                            <div class="step-label">Upload Docs</div>
                        </div>
                        <div class="step" id="step3">
                            <div class="step-number">3</div>
                            <div class="step-label">Take Exam</div>
                        </div>
                        <div class="step" id="step4">
                            <div class="step-number">4</div>
                            <div class="step-label">Complete</div>
                        </div>
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>

                <!-- Status Cards -->
                <div class="status-grid">
                    <div class="status-card">
                        <h3><span>üìù</span> Application Status</h3>
                        <div class="status-value status-not-started" id="applicationStatusText">Not Started</div>
                        <div class="status-description" id="applicationStatusDesc">You haven't started your application</div>
                    </div>

                    <div class="status-card">
                        <h3><span>üìÑ</span> Documents</h3>
                        <div class="status-value status-not-started" id="documentsStatusText">0/6</div>
                        <div class="status-description" id="documentsStatusDesc">No documents uploaded yet</div>
                        <div class="document-indicator" id="documentsIndicator" style="display: none; margin-top: 10px; font-size: 12px; color: #e53935; font-weight: 500;">
                            ‚ö†Ô∏è Missing documents
                        </div>
                    </div>

                    <div class="status-card">
                        <h3><span>üíØ</span> Exam Score</h3>
                        <div class="status-value status-not-started" id="examStatusText">--</div>
                        <div class="status-description" id="examStatusDesc">Exam not taken yet</div>
                    </div>

                    <div class="status-card">
                        <h3><span>üìÖ</span> Last Updated</h3>
                        <div class="status-value" id="lastUpdatedText">--</div>
                        <div class="status-description" id="lastUpdatedDesc">No updates yet</div>
                    </div>
                </div>
            </div>

            <!-- Apply for Scholarship -->
            <div id="applySection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1>Apply for Scholarship</h1>
                    <p>Select your preferred TESDA program</p>
                </div>

                <div class="programs-container" id="programsContainer">
                    <!-- Programs will be loaded here -->
                </div>

                <div id="applicationForm" style="display: none; margin-top: 40px;">
                    <h3>Application Form</h3>
                    <div id="selectedProgramInfo"></div>
                    
                    <div style="background: var(--light-blue); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <h4>Important Notes:</h4>
                        <ul style="padding-left: 20px;">
                            <li>You can only apply for ONE scholarship program</li>
                            <li>Once submitted, you cannot change your program selection</li>
                            <li>Make sure you meet all requirements before applying</li>
                            <li>You will need to upload required documents after applying</li>
                        </ul>
                    </div>

                    <button class="btn btn-primary" onclick="submitApplication()" id="submitApplicationBtn">
                        Submit Application
                    </button>
                </div>
            </div>

            <!-- Upload Documents -->
            <div id="documentsSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1>Upload Required Documents</h1>
                    <p>Please upload all required documents in the specified order</p>
                </div>

                <div class="upload-section">
                    <p>All documents must be in PDF, JPG, or PNG format. Maximum file size: 5MB</p>
                    <p style="color: var(--warning); font-weight: 500; margin-top: 10px;">
                        ‚ö†Ô∏è Please upload documents in this order: 1. 2x2 ID ‚Üí 2. Birth Certificate ‚Üí 3. Report Card ‚Üí 4. Good Moral ‚Üí 5. TOR ‚Üí 6. Diploma
                    </p>
                    
                    <div class="documents-summary" id="documentsSummary" style="background: var(--light-blue); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Upload Progress:</strong> 
                                <span id="uploadedCount">0</span>/<span id="totalCount">6</span> documents
                            </div>
                            <div class="progress-circle" id="progressCircle">
                                <svg width="60" height="60" viewBox="0 0 36 36">
                                    <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="#e0e0e0" stroke-width="3"/>
                                    <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="#1e3c72" stroke-width="3" stroke-dasharray="0, 100"
                                        id="circlePath"/>
                                    <text x="18" y="20.35" text-anchor="middle" font-size="10" fill="#1e3c72" id="circleText">0%</text>
                                </svg>
                            </div>
                        </div>
                        <div id="missingDocuments" style="margin-top: 10px; font-size: 14px; color: #e53935;">
                            <!-- Missing documents will be shown here -->
                        </div>
                    </div>
                    
                    <div class="documents-list" id="documentsList">
                        <!-- Documents will be loaded here -->
                    </div>

                    <div style="text-align: center; margin-top: 40px;">
                        <button class="btn btn-primary" onclick="checkDocumentsCompletion()" id="submitDocumentsBtn">
                            Submit All Documents
                        </button>
                    </div>
                </div>
            </div>

            <!-- Take Online Exam -->
            <div id="examSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1>Online Qualification Exam</h1>
                    <p>Take the exam for your selected program</p>
                </div>

                <div class="exam-section">
                    <div class="exam-card">
                        <div class="exam-icon">üìù</div>
                        <h2 id="examProgramTitle">Program Exam</h2>
                        <p id="examDescription">Take the qualification exam for your selected scholarship program. The exam will test your basic knowledge and aptitude.</p>
                        
                        <div class="exam-details">
                            <h4>Exam Details:</h4>
                            <ul>
                                <li>‚úÖ 50 multiple choice questions</li>
                                <li>‚è±Ô∏è 60 minutes time limit</li>
                                <li>üìù Covers basic knowledge and aptitude</li>
                                <li>üíØ Passing score: 75% and above</li>
                                <li>üîÑ You can only take the exam once</li>
                                <li>üìä Instant results after submission</li>
                            </ul>
                        </div>

                        <div id="examStatusInfo" style="margin: 20px 0; padding: 15px; border-radius: 8px; background: #f5f5f5;">
                            <!-- Exam status will be shown here -->
                        </div>

                        <button class="btn btn-primary btn-start-exam" onclick="startExam()" id="startExamBtn">
                            Start Exam Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Application Status -->
            <div id="statusSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1>Application Status</h1>
                    <p>Track your scholarship application progress</p>
                </div>

                <div class="application-details">
                    <div class="detail-card">
                        <h3><span>üìã</span> Application Information</h3>
                        <div class="detail-row">
                            <div class="detail-label">Application ID:</div>
                            <div class="detail-value" id="statusApplicationId">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Program:</div>
                            <div class="detail-value" id="statusProgram">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Status:</div>
                            <div class="detail-value">
                                <span class="status-badge badge-pending" id="statusBadge">Not Started</span>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Date Applied:</div>
                            <div class="detail-value" id="statusDateApplied">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Last Updated:</div>
                            <div class="detail-value" id="statusLastUpdated">--</div>
                        </div>
                    </div>

                    <div class="detail-card">
                        <h3><span>üìÑ</span> Documents Status</h3>
                        <div id="statusDocumentsList">
                            <!-- Documents status will be shown here -->
                        </div>
                    </div>

                    <div class="detail-card">
                        <h3><span>üíØ</span> Exam Results</h3>
                        <div class="detail-row">
                            <div class="detail-label">Exam Status:</div>
                            <div class="detail-value" id="examResultStatus">Not Taken</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Score:</div>
                            <div class="detail-value" id="examScore">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Result:</div>
                            <div class="detail-value" id="examResult">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Date Taken:</div>
                            <div class="detail-value" id="examDate">--</div>
                        </div>
                    </div>

                    <div class="timeline">
                        <h3><span>üìÖ</span> Application Timeline</h3>
                        <div id="applicationTimeline">
                            <!-- Timeline will be shown here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Update Profile Section -->
            <div id="profileSection" class="content-section" style="display: none;">
                <div class="content-header">
                    <h1>Update Profile</h1>
                    <p>Manage your account settings and security</p>
                </div>
                
                <div class="profile-section">
                    <div class="profile-info">
                        <h3><span>üë§</span> Personal Information</h3>
                        <div class="detail-row">
                            <div class="detail-label">Full Name:</div>
                            <div class="detail-value" id="profileFullName">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Email:</div>
                            <div class="detail-value" id="profileEmail">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Username:</div>
                            <div class="detail-value" id="profileUsername">--</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Account Created:</div>
                            <div class="detail-value" id="profileCreatedDate">--</div>
                        </div>
                    </div>

                    <div class="profile-info">
                        <h3><span>üîí</span> Change Password</h3>
                        <p style="color: var(--medium-gray); margin-bottom: 20px;">
                            Update your password for enhanced security. You will need to use the new password for your next login.
                        </p>
                        
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" class="form-control" placeholder="Enter your current password">
                            <div class="error-message" id="currentPasswordError"></div>
                        </div>

                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" class="form-control" placeholder="Create a new password">
                            <div class="password-strength">
                                <div class="strength-bar" id="passwordStrength"></div>
                            </div>
                            <div class="form-hint">Password must be at least 8 characters with uppercase, lowercase, and numbers</div>
                            <div class="error-message" id="newPasswordError"></div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password</label>
                            <input type="password" id="confirmPassword" class="form-control" placeholder="Re-enter new password">
                            <div class="error-message" id="confirmPasswordError"></div>
                            <div class="success-message" id="passwordSuccess" style="display: none;">‚úÖ Passwords match!</div>
                        </div>

                        <div style="text-align: center; margin-top: 30px;">
                            <button class="btn btn-primary" onclick="updatePassword()" id="updatePasswordBtn">
                                Update Password
                            </button>
                        </div>
                    </div>

                    <div class="profile-info" style="background: #fff8e1; border: 2px solid #ffd54f;">
                        <h3><span>‚ö†Ô∏è</span> Security Notice</h3>
                        <ul style="color: var(--medium-gray); padding-left: 20px;">
                            <li>Your password will be updated immediately</li>
                            <li>You will need to login again with your new password</li>
                            <li>Make sure to remember your new password</li>
                            <li>For security reasons, passwords are encrypted in storage</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-icon">‚ö†Ô∏è</div>
                <h3 id="modalTitle">Confirm Program Selection</h3>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Are you sure you want to apply for this program?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-confirm" onclick="confirmProgramSelection()">Yes, Apply</button>
                <button class="btn btn-cancel" onclick="cancelProgramSelection()">No, Go Back</button>
            </div>
        </div>
    </div>
    <script src="../js/student-dashboard.js"></script>
</body>
</html>